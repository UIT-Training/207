package cn.gongly.server.model;
/**
 * QQ服务器,它在监听,等待
 * @author MSI
 *
 */
import java.net.*;
import java.io.*;
import java.util.*;

import cn.gongly.common.Massage;
import cn.gongly.common.User;

public class MyQqServer {
	
	
	
	public MyQqServer() {
		
		try {
			//监听
			System.out.println("我是服务器在9999监听");
			ServerSocket ss = new ServerSocket(9999);
			//阻塞,等待连接
			Socket s=ss.accept();
			
			//接收客户端的信息
			
			//BufferedReader br = new BufferedReader(new InputStreamReader(s.getInputStream()));
			//String info =br.readLine();
			ObjectInputStream ois=new ObjectInputStream(s.getInputStream());
			User u =(User)oos.readObject();
			
			Massage m = new Massage();
			if(u.getPasswd().equals("123456")){
				//成功
				
				m.setMesType("1");
			}
			else{
				m.setMesType("2);
			}
			ObjectOutputStream oos = new ObjectOutputStream(s.getOutputStream());
			oos.writeObject(m);
			
		} catch (Exception e) {
			e.printStackTrace();
			// TODO: handle exception
		}finally{
			
		}
	}
}
